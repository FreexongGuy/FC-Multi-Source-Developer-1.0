<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Announcements - FC Multi-Source</title>
  <link rel="stylesheet" href="announcements.css">
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #121212;
      color: #fff;
      margin: 0;
      padding: 20px;
    }

    #navbar {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    #navbar button {
      padding: 8px 12px;
      border: none;
      border-radius: 5px;
      background-color: #4a90e2;
      color: #fff;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    #navbar button:hover {
      background-color: #357ABD;
    }

    h1 {
      margin-bottom: 15px;
    }

    /* Resizable Announcements Container */
    #announcements-container {
      max-height: 400px;       /* initial height */
      min-height: 150px;
      padding: 10px;
      border: 1px solid #333;
      border-radius: 5px;
      background-color: #1e1e1e;
      overflow-y: auto;        /* scroll if content exceeds */
      resize: vertical;        /* allows vertical resizing */
      font-family: monospace;
      color: #fff;
    }

    .announcement-item {
      padding: 5px 8px;
      border-bottom: 1px solid #333;
      white-space: pre-wrap;
      word-wrap: break-word;
    }
  </style>
</head>
<body>

<!-- Navbar -->
<div id="navbar">
  <button onclick="location.href='index.html'">Chat</button>
  <button onclick="location.href='rules.html'">Rules</button>
  <button onclick="location.href='policies.html'">Terms and Policies</button>
  <button onclick="location.href='call.html'">Call Chat</button>
  <button onclick="location.href='announcements.html'">Announcements</button>
</div>

<h1>Announcements</h1>

<!-- Resizable Announcements -->
<div id="announcements-container"></div>

<!-- Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyApJyJrg_dLkBdA08heBNlfIZObSY9LqXk",
  authDomain: "fc-multi-source.firebaseapp.com",
  databaseURL: "https://fc-multi-source-default-rtdb.firebaseio.com",
  projectId: "fc-multi-source",
  storageBucket: "fc-multi-source.firebasestorage.app",
  messagingSenderId: "602428529893",
  appId: "1:602428529893:web:5da6267bead4539113080c"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const announcementsRef = ref(db, "announcements");
const container = document.getElementById("announcements-container");

// Listen for announcements changes
onValue(announcementsRef, snapshot => {
  const data = snapshot.val() || {};
  container.innerHTML = "";
  Object.keys(data)
    .sort((a, b) => data[a].timestamp - data[b].timestamp)
    .forEach(key => {
      const div = document.createElement("div");
      div.className = "announcement-item";
      div.textContent = data[key].message;
      container.appendChild(div);
    });
});
</script>

</body>
</html>
